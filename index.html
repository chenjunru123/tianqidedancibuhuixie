<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_837750_ocdr42rhrv.css">
    <link rel="stylesheet" href="css/rem.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/jquery-3.3.1.min.js"></script>
    <title>Document</title>
</head>
<body>
    <header>
        <h1>腾讯天气</h1>
        <img src="img/111.png" alt="" style="width: 2rem;height: 0.8rem;">
    </header>
    <main>
        <div class="top">
            <div class="zhong">
                <i class="iconfont icon-dizhi1" style="font-size: 0.4rem;color: white;"></i>
                <h1 style="font-size: 0.4rem;color: white;font-weight: normal;">&nbsp;&nbsp;大同市&nbsp;广灵县</h1>
            </div>
            <div class="you" style="position: relative;">
                <i class="iconfont icon-tianqi" style="font-size: 0.8rem;position: absolute;top: -0.1rem;left: -0.07rem;color: #ff6700"></i>
            </div>
        </div>
        <div class="middle">
            <h4>空气</h4>
            <h3>轻度污染</h3>
        </div>
        <div class="bottom">
            <p><span class="p1">0</span>°</p>
            <p class="p2">晴</p>
            <p style="font-size: 0.4rem;margin-top: 1.27rem;">湿度: <span  class="p3">28</span></p>
            <p class="p4">天冷了，注意保暖</p>
        </div>
    </main>
    <div class="today">
        <div class="left">
            <div class="shang">
                <h1 style="font-size: 0.35rem;font-weight: normal;">今天</h1>
                <h2 style="font-size: 0.35rem;font-weight: normal;margin-left: 0.6rem;">2</h2>
                <h3 style="font-size: 0.35rem;font-weight: normal;">-11</h3>
            </div>
            <div class="xia">
                <h1 style="font-size: 0.35rem;font-weight: normal;">5</h1>
                <img src="" alt="" style="width: 0.55rem;height: 0.55rem;">
            </div>
        </div>
        <div class="right">
            <div class="shang">
                <h1 style="font-size: 0.35rem;font-weight: normal;">明天</h1>
                <h2 style="font-size: 0.35rem;font-weight: normal;margin-left: 0.6rem;">3</h2>
                <h3 style="font-size: 0.35rem;font-weight: normal;">13</h3>
            </div>
            <div class="xia">
                <h1 style="font-size: 0.35rem;font-weight: normal;">23</h1>
                <img src="img/6.png" alt="" style="width: 0.55rem;height: 0.55rem;">
            </div>
        </div>
    </div>
    <div class="weather">
        <ul>
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
            <!--<li>-->
                <!--<h1 style="font-size: 0.3rem;">12:00</h1>-->
                <!--<img src="img/0.png" alt="" style="width: 0.55rem;height: 0.55rem;">-->
                <!--<h2 style="font-size: 0.3rem;">-1°C</h2>-->
            <!--</li>-->
        </ul>
    </div>
    <div class="week">
        <div class="con">
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
            <!--<div class="box">-->
                <!--<span>昨天</span>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>09</span>/<span>12</span></div>-->
                <!--<span>多云</span>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div>34°</div>-->
                <!--<div style="margin-top:3rem;">34°</div>-->
                <!--<img src="img/0.png" alt="">-->
                <!--<div><span>多云</span></div>-->
                <!--<div style="margin:0.1rem 0 0.2rem 0;"><span>北风</span></div>-->
                <!--<span>三级</span>-->
            <!--</div>-->
        </div>
        <div class="canvas"></div>
    </div>
    <footer>数据来源于中国天气网</footer>
</body>
</html>
<script>
    $(function () {
        let weather;
        //请求数据
        $.ajax({
            url:"https://www.toutiao.com/stream/widget/local_weather/data/?city=太原",
            dataType:"jsonp",
            success:function (res) {
                weather=res.data.weather;
                console.log(weather);
                render(weather);
            }
        });
        //渲染数据
        function render(data) {
            $("main .top .zhong h1").html(data.city_name);
            $("main .bottom .p1").html(data.current_temperature);
            $("main .bottom .p2").html(data.current_condition);
            $("main .bottom .p3").html(data.aqi);
            $(".today .left .shang h2").html(data.high_temperature+"/");
            $(".today .left .shang h3").html(data.low_temperature+"°C");
            $(".today .left .xia h1").html(data.day_condition);
            // $(".today .left .xia img").html(obj.dat_weather_icon_id);
            $(".today .left .xia img").attr("src",`img/${data.dat_weather_icon_id}.png`);
            $(".today .right .shang h2").html(data.tomorrow_high_temperature+"/");
            $(".today .right .shang h3").html(data.tomorrow_low_temperature+"°C");
            $(".today .right .xia h1").html(data.tomorrow_condition);
            // $(".today .right .xia img").html(obj.tomorrow_weather_icon_id);
            $(".today .right .xia img").attr("src",`img/${data.tomorrow_weather_icon_id}.png`);


            // 小时   dom 对象
            data.hourly_forecast.forEach(function (item,index) {
                let str="";
                str=`            <li>
                <h1 style="font-size: 0.3rem;">${item.hour}:00</h1>
                <img src="img/${item.weather_icon_id}.png" alt="" style="width: 0.55rem;height: 0.55rem;">
                <h2 style="font-size: 0.3rem;">${item.temperature}°</h2>
                        </li>`
                $(".weather ul").append(str);
            })


        let str1 = "";
        let high = [];
        let low = [];
        let x = [];
        let weeknum = ["日", "一", "二", "三", "四", "五", "六"]
        for (obj of weather.forecast_list) {
            let date = new Date(obj.date);
            let day = date.getDay();   //星期几   0 1 2 3 4 5 6
            let month = (obj.date).slice(5, 7);
            let month1 = (obj.date).slice(8, 10);
            x.push(day);
            high.push(obj.high_temperature);
            low.push(obj.low_temperature);
            str1 += `
                    <div class="box" style="margin-left:0.4rem; margin-right: 0.4rem;margin-bottom:0.4rem;width: 10rem;">
                        <span style="color: black;">星期${weeknum[day]}</span>
                        <div style="margin:0.1rem 0 0.2rem 0;"><span>${month}</span>/<span>${month1}</span></div>
                        <span style="color: black;font-size: 0.24rem;">多云</span>
                        <img src="img/${obj.weather_icon_id}.png" alt="">
                        <div style="color: black;">${obj.high_temperature}°</div>
                        <div style="margin-top:3rem;">${obj.low_temperature}°</div>
                        <img src="img/${obj.weather_icon_id}.png" alt="">
                        <div><span style="color: black;font-size: 0.26rem;display:block;height: 0.9rem;">${obj.condition}</span></div>
                        <div style="margin:0.1rem 0 0.2rem 0;"><span>${obj.wind_direction}</span></div>
                        <span>${obj.wind_level}级</span>
                      </div>`
        }
        $(".week .con").html(str1)
        }
    })
</script>